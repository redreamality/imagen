{
  "schema_version": "1.0",
  "id": "imagen",
  "version": "0.1.2",
  "name": "Gemini 图像生成工具 (NanoBanana2)",
  "description": "使用 Google Gemini API 实现图像生成和编辑功能，支持文本生成图像和基于现有图像的编辑",
  "author": "redreamality",
  "github_url": "https://github.com/your-org/gemini-image-generation",
  "tags": [
    "image-generation",
    "image-editing",
    "gemini",
    "ai",
    "google"
  ],
  "entry_point": "src/main.py",
  "dependencies_file": "pyproject.toml",
  "functions": [
    {
      "name": "text_to_image",
      "description": "根据文本提示词生成图像，使用 Gemini API 将文本描述转换为高质量图像",
      "parameters": [
        {
          "name": "prompt",
          "type": "string",
          "description": "图像生成提示词，描述想要生成的图像内容。建议提供详细、具体的描述以获得更好的效果",
          "required": true
        }
      ],
      "files": {
        "output": {
          "type": "array",
          "items": {
            "type": "OutputFile"
          },
          "description": "生成的图像文件（PNG 格式）"
        }
      },
      "returns": {
        "type": "object",
        "description": "包含生成结果的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "prompt": {
            "type": "string",
            "description": "使用的提示词（成功时）",
            "optional": true
          },
          "message": {
            "type": "string",
            "description": "操作消息（成功时）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": [
              "MISSING_API_KEY",
              "INVALID_PROMPT",
              "API_REQUEST_FAILED",
              "NO_IMAGE_DATA",
              "REQUEST_TIMEOUT",
              "NETWORK_ERROR",
              "INVALID_RESPONSE_FORMAT",
              "UNEXPECTED_ERROR"
            ]
          }
        }
      },
      "secrets": [
        {
          "name": "GEMINI_API_KEY",
          "description": "Google Gemini API 密钥，用于认证图像生成服务",
          "instructions": "请访问 https://ai.google.dev/ 注册并获取 Gemini API Key。本预制件使用 gemini-3-pro-image-preview 模型",
          "required": true
        }
      ]
    },
    {
      "name": "edit_image",
      "description": "基于现有图片进行编辑，使用 Gemini API 根据编辑指令修改图像",
      "parameters": [
        {
          "name": "prompt",
          "type": "string",
          "description": "图像编辑指令，描述想要对图像进行的修改。例如：'把背景改成蓝天白云'、'添加一只猫'等",
          "required": true
        }
      ],
      "files": {
        "input_image": {
          "type": "array",
          "items": {
            "type": "InputFile"
          },
          "minItems": 1,
          "maxItems": 1,
          "description": "要编辑的输入图像文件（支持 PNG、JPEG、GIF、WebP 格式）",
          "required": true
        },
        "output": {
          "type": "array",
          "items": {
            "type": "OutputFile"
          },
          "description": "编辑后的图像文件（PNG 格式）"
        }
      },
      "returns": {
        "type": "object",
        "description": "包含编辑结果的对象",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          },
          "prompt": {
            "type": "string",
            "description": "使用的编辑指令（成功时）",
            "optional": true
          },
          "message": {
            "type": "string",
            "description": "操作消息（成功时）",
            "optional": true
          },
          "error": {
            "type": "string",
            "description": "错误信息（失败时）",
            "optional": true
          },
          "error_code": {
            "type": "string",
            "description": "错误代码（失败时）",
            "optional": true,
            "enum": [
              "MISSING_API_KEY",
              "INVALID_PROMPT",
              "NO_INPUT_FILE",
              "INVALID_INPUT_FILE",
              "API_REQUEST_FAILED",
              "NO_IMAGE_DATA",
              "REQUEST_TIMEOUT",
              "NETWORK_ERROR",
              "INVALID_RESPONSE_FORMAT",
              "UNEXPECTED_ERROR"
            ]
          }
        }
      },
      "secrets": [
        {
          "name": "GEMINI_API_KEY",
          "description": "Google Gemini API 密钥，用于认证图像编辑服务",
          "instructions": "请访问 https://ai.google.dev/ 注册并获取 Gemini API Key。本预制件使用 gemini-3-pro-image-preview 模型",
          "required": true
        }
      ]
    }
  ],
  "execution_environment": {
    "cpu": "500m",
    "memory": "512Mi"
  }
}
